<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Popgen GUI: negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Popgen GUI
   </div>
   <div id="projectbrief">GUI Front end with refactoring of population genetics programming provided by Tiago Antao&#39;s AgeStructureNe code, with some outside dependancies (chiefly simuPop and NeEstimator)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>negui</b></li><li class="navelem"><a class="el" href="namespacenegui_1_1genepopfilesampler.html">genepopfilesampler</a></li><li class="navelem"><a class="el" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html">GenepopFileSamplerIndividualsAgeStructureCohorts</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.png" usemap="#negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts_map" alt=""/>
  <map id="negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts_map" name="negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts_map">
<area href="classnegui_1_1genepopfilesampler_1_1GenepopFileSampler.html" alt="negui.genepopfilesampler.GenepopFileSampler" shape="rect" coords="0,56,523,80"/>
<area href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohortsPercentage.html" alt="negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohortsPercentage" shape="rect" coords="0,168,523,192"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab997e641e99278377a07624ad847a697"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab997e641e99278377a07624ad847a697"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, o_genepopfilemanager, o_genepopfilesampleparams)</td></tr>
<tr class="separator:ab997e641e99278377a07624ad847a697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28deaac6347b19f565b2a50f233a6f06"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a28deaac6347b19f565b2a50f233a6f06">resize_sample_to_meet_size_criteria</a> (self, li_indiv_by_age_collected)</td></tr>
<tr class="separator:a28deaac6347b19f565b2a50f233a6f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50e96ddae763e7e8dba2ac37fa0c6ce5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a50e96ddae763e7e8dba2ac37fa0c6ce5">doSample</a> (self)</td></tr>
<tr class="separator:a50e96ddae763e7e8dba2ac37fa0c6ce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSampler.html">negui.genepopfilesampler.GenepopFileSampler</a></td></tr>
<tr class="memitem:abcaee019cd11b009568dde7fa2e94341 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abcaee019cd11b009568dde7fa2e94341"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, o_genepopfilemanager, o_genepopfilesampleparams)</td></tr>
<tr class="separator:abcaee019cd11b009568dde7fa2e94341 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58431ed64951ef4a3cf813c9ee2624b3 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a58431ed64951ef4a3cf813c9ee2624b3"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>filemanager</b> (self)</td></tr>
<tr class="separator:a58431ed64951ef4a3cf813c9ee2624b3 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad48f60ff378a777538a886b058eb0e00 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad48f60ff378a777538a886b058eb0e00"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>sampleparams</b> (self)</td></tr>
<tr class="separator:ad48f60ff378a777538a886b058eb0e00 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">This sampler class is meant to implement Tiago's sampling code in his
sampleIndivsCohort.py module.  It samples  individuals grouped by age.
The GenepopFileSampleParams object used by instances
of this class has the values Tiagos module takes at the command line 
that restrict the total individuals per gen.  His command line params 
startGen and endGen paramters are already implemented via the Sampler's
li_population_numbers parameter.
</pre> 
<p>Definition at line <a class="el" href="genepopfilesampler_8py_source.html#l01103">1103</a> of file <a class="el" href="genepopfilesampler_8py_source.html">genepopfilesampler.py</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a50e96ddae763e7e8dba2ac37fa0c6ce5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts.doSample </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sample identical numbers per age, then reduce to meet max indiv per gen or proportion.  
See Tiagos code in his sampleIndivsCohort.py module.  Note that when param "lp" is 
included, then Tiagos code adds to his lines that print out, gen_number\sindiv, the same lines
without a gen number, presumably for downstream filtering when making the final
genenpop file. As of 2016_09_12, the output when the "lp" arg is added, is not 
implemented.
</pre> 
<p>Definition at line <a class="el" href="genepopfilesampler_8py_source.html#l01197">1197</a> of file <a class="el" href="genepopfilesampler_8py_source.html">genepopfilesampler.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01197"></a><span class="lineno"><a class="line" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a50e96ddae763e7e8dba2ac37fa0c6ce5"> 1197</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a50e96ddae763e7e8dba2ac37fa0c6ce5">doSample</a>( self ):</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="stringliteral">        Sample identical numbers per age, then reduce to meet max indiv per gen or proportion.  </span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="stringliteral">        See Tiagos code in his sampleIndivsCohort.py module.  Note that when param &quot;lp&quot; is </span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="stringliteral">        included, then Tiagos code adds to his lines that print out, gen_number\sindiv, the same lines</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="stringliteral">        without a gen number, presumably for downstream filtering when making the final</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="stringliteral">        genenpop file. As of 2016_09_12, the output when the &quot;lp&quot; arg is added, is not </span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="stringliteral">        implemented.</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="comment">#estimator driver needs a pop number subsample when it adds calls to the NeEstimator:</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        self.filemanager.subsamplePopulationsByList( self.sampleparams.population_numbers,</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                                        s_subsample_tag=self.sampleparams.population_subsample_name )</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        FIELD_NAME_AGE=<span class="stringliteral">&quot;age&quot;</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        dli_indiv_index_lists_by_pop_number={}</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        </div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        i_replicate_count=self.sampleparams.replicates</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <span class="keywordflow">for</span> i_replicate_number <span class="keywordflow">in</span> range( i_replicate_count ):</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            <span class="keywordflow">for</span> i_pop_number <span class="keywordflow">in</span> self.sampleparams.population_numbers:</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                ls_id_list=self.filemanager.getListIndividuals( i_pop_number )</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="stringliteral">                We assume that the list of Id&#39;s in the individual list</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="stringliteral">                is indexed such that the zeroth id corresponds to the first</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="stringliteral">                indiv as ordered in the genepop file, the [1] indexed id</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="stringliteral">                is the second indiv, etc.</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="stringliteral">                &#39;&#39;&#39;</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                i_tot_indiv=len( ls_id_list )</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                dli_indiv_index_by_age={}</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                </div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                <span class="keywordflow">for</span> idx <span class="keywordflow">in</span> range( i_tot_indiv ):</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                    s_id=ls_id_list[ idx ]</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                    o_id_vals=GenepopIndivIdVals( s_id, </div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                                        self.sampleparams.fields )</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                    </div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                    <span class="comment">#age may be float or int:</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                    v_age=o_id_vals.getVal( FIELD_NAME_AGE )</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                    <span class="keywordflow">if</span> v_age &gt; self.sampleparams.max_age:</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                    <span class="comment">#end if too old, continue</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                    <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="stringliteral">                    Note that idx+1 gives the number of the individual as ordered by its</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="stringliteral">                    entry in the &quot;pop&quot; section of this pop in the genepop file, as used</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="stringliteral">                    by the genepopfilemanager object to point to it&#39;s byte address in the file.</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="stringliteral">                    Thus it&#39;s our way of collecting samples of individuals and passing them into the</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="stringliteral">                    genepop file manager object&#39;s subsampling records (its attribute </span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="stringliteral">                    __indiv_subsamples).</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="stringliteral">                    &#39;&#39;&#39;</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                    i_indiv_number=idx+1</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                    dli_indiv_index_by_age.setdefault( \</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                v_age, [] ).append( i_indiv_number ) </div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                <span class="comment">#end for each individual&#39;s id   </span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                li_indiv_by_age_collected=self.<a class="code" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a7c5c9e3e3aeb9c9c25c95029781e63d1">__get_individuals</a>( \</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                                                dli_indiv_index_by_age ) </div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            </div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="stringliteral">                Resize the sample if it exceeds size limits (as given by</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="stringliteral">                min,max, or, in the case of a proportionaly sampling scheme</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="stringliteral">                (subclass GenepopFileSamplerIndividualsAgeStructureCohortsPercentage),</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="stringliteral">                subsample a proportion.  Note that these lists will be sorted by the</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="stringliteral">                GenepopFileManager in the subsampleIndividualsByNumberList call</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="stringliteral">                below.</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="stringliteral">                &#39;&#39;&#39;</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                li_indiv_by_age_sampled=self.<a class="code" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a28deaac6347b19f565b2a50f233a6f06">resize_sample_to_meet_size_criteria</a>( </div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                                                            li_indiv_by_age_collected ) </div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                <span class="comment">#We rely on the genpopfilemanager object to sort </span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                <span class="comment">#these indices when we pass them to the def,</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                <span class="comment">#subsampleIndividualsByNumberList (see below).</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                dli_indiv_index_lists_by_pop_number[ i_pop_number ] = \</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                                                    li_indiv_by_age_sampled</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            <span class="comment">#end for each pop number</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            </div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            s_this_subsample_name=make_subsample_tag( \</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                                self.sampleparams.sample_param_value, </div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                                i_replicate_number, </div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                                SCHEME_COHORTS,</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                                s_prefix=self.sampleparams.sample_tag_base )</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            </div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            self.filemanager.subsampleIndividualsByNumberList( \</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                                    dli_indiv_index_lists_by_pop_number,</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                                    s_this_subsample_name )</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <span class="comment">#end for each replicate</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="keywordflow">return</span></div><div class="ttc" id="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts_html_a28deaac6347b19f565b2a50f233a6f06"><div class="ttname"><a href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a28deaac6347b19f565b2a50f233a6f06">negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts.resize_sample_to_meet_size_criteria</a></div><div class="ttdeci">def resize_sample_to_meet_size_criteria(self, li_indiv_by_age_collected)</div><div class="ttdef"><b>Definition:</b> <a href="genepopfilesampler_8py_source.html#l01146">genepopfilesampler.py:1146</a></div></div>
<div class="ttc" id="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts_html_a50e96ddae763e7e8dba2ac37fa0c6ce5"><div class="ttname"><a href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a50e96ddae763e7e8dba2ac37fa0c6ce5">negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts.doSample</a></div><div class="ttdeci">def doSample(self)</div><div class="ttdef"><b>Definition:</b> <a href="genepopfilesampler_8py_source.html#l01197">genepopfilesampler.py:1197</a></div></div>
<div class="ttc" id="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts_html_a7c5c9e3e3aeb9c9c25c95029781e63d1"><div class="ttname"><a href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a7c5c9e3e3aeb9c9c25c95029781e63d1">negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts.__get_individuals</a></div><div class="ttdeci">def __get_individuals(self, dli_indiv_index_by_age)</div><div class="ttdef"><b>Definition:</b> <a href="genepopfilesampler_8py_source.html#l01119">genepopfilesampler.py:1119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a28deaac6347b19f565b2a50f233a6f06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts.resize_sample_to_meet_size_criteria </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>li_indiv_by_age_collected</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given the individuals collected by age, 
check min/max limits and subsample
if needed.  If within limits, return
the original list
</pre> 
<p>Definition at line <a class="el" href="genepopfilesampler_8py_source.html#l01146">1146</a> of file <a class="el" href="genepopfilesampler_8py_source.html">genepopfilesampler.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01146"></a><span class="lineno"><a class="line" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a28deaac6347b19f565b2a50f233a6f06"> 1146</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a28deaac6347b19f565b2a50f233a6f06">resize_sample_to_meet_size_criteria</a>( self, li_indiv_by_age_collected ):</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="stringliteral">        Given the individuals collected by age, </span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="stringliteral">        check min/max limits and subsample</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="stringliteral">        if needed.  If within limits, return</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="stringliteral">        the original list</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="comment">#If too few we raise an error.  If too many we</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="comment">#randomly select to reach our max valid pop size</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        i_tot_collected=len( li_indiv_by_age_collected )</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        li_indiv_by_age_sampled=<span class="keywordtype">None</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">if</span> i_tot_collected &lt; self.sampleparams.min_indiv_per_gen:</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            s_msg=<span class="stringliteral">&quot;In GenepopFileSamplerIndividualsAgeStructureCohorts instance, &quot;</span> \</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                    <span class="stringliteral">&quot;after sampling cohorts, total collected, &quot;</span> \</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                    + str( i_tot_collected ) \</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                    + <span class="stringliteral">&quot;, is less than the value given for &quot;</span> \</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                    + <span class="stringliteral">&quot;the minimum pop size, &quot;</span> \</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                    + str( self.sampleparams.min_indiv_per_gen ) \</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                    + <span class="stringliteral">&quot;.&quot;</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            <span class="keywordflow">raise</span> Exception ( s_msg )</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keywordflow">elif</span> i_tot_collected &gt; self.sampleparams.max_indiv_per_gen:</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                li_indiv_by_age_sampled=random.sample( \</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                                    li_indiv_by_age_collected,</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                                    self.sampleparams.max_indiv_per_gen )</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                                        </div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            <span class="keywordflow">except</span> Exception <span class="keyword">as</span> oex:</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                s_sample_error_msg= \</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                    <span class="stringliteral">&quot;In GenepopFileSamplerIndividualsAgeStructureCohorts &quot;</span> \</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                        + <span class="stringliteral">&quot;instance, def resize_sample_to_meet_size_criteria, &quot;</span>  \</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                        + <span class="stringliteral">&quot;random.sample failed on list of &quot;</span> \</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                        + str( len( li_indiv_by_age_collected ) ) \</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                        + <span class="stringliteral">&quot; individuals.  Target total to be sampled: &quot;</span> \</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                        + str( self.sampleparams.max_indiv_per_gen ) + <span class="stringliteral">&quot;.&quot;</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                s_msg=s_sample_error_msg \</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                        + <span class="stringliteral">&quot;  Exception message: &quot;</span> + str( oex ) + <span class="stringliteral">&quot;.&quot;</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                <span class="keywordflow">raise</span> Exception( s_msg )</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            <span class="comment">#end try . . . except</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            <span class="comment">#within interval min to max pop size, so keep original </span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            li_indiv_by_age_sampled=li_indiv_by_age_collected</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="comment">#end if too few, error, else if too many, sample, else no change</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keywordflow">return</span> li_indiv_by_age_sampled</div><div class="ttc" id="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts_html_a28deaac6347b19f565b2a50f233a6f06"><div class="ttname"><a href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureCohorts.html#a28deaac6347b19f565b2a50f233a6f06">negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureCohorts.resize_sample_to_meet_size_criteria</a></div><div class="ttdeci">def resize_sample_to_meet_size_criteria(self, li_indiv_by_age_collected)</div><div class="ttdef"><b>Definition:</b> <a href="genepopfilesampler_8py_source.html#l01146">genepopfilesampler.py:1146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="genepopfilesampler_8py_source.html">genepopfilesampler.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
