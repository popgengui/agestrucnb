<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Popgen GUI: negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureRelateds Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Popgen GUI
   </div>
   <div id="projectbrief">GUI Front end with refactoring of population genetics programming provided by Tiago Antao&#39;s AgeStructureNe code, with some outside dependancies (chiefly simuPop and NeEstimator)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>negui</b></li><li class="navelem"><a class="el" href="namespacenegui_1_1genepopfilesampler.html">genepopfilesampler</a></li><li class="navelem"><a class="el" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds.html">GenepopFileSamplerIndividualsAgeStructureRelateds</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureRelateds Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureRelateds:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds.png" usemap="#negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureRelateds_map" alt=""/>
  <map id="negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureRelateds_map" name="negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureRelateds_map">
<area href="classnegui_1_1genepopfilesampler_1_1GenepopFileSampler.html" alt="negui.genepopfilesampler.GenepopFileSampler" shape="rect" coords="0,56,462,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa74e2bb52923a31c31a6a2ca54bda6e0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa74e2bb52923a31c31a6a2ca54bda6e0"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, o_genepopfilemanager, o_genepopfilesampleparams)</td></tr>
<tr class="separator:aa74e2bb52923a31c31a6a2ca54bda6e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c1d8215c48697cf7f81ba45c31435aa"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds.html#a2c1d8215c48697cf7f81ba45c31435aa">doSample</a> (self)</td></tr>
<tr class="separator:a2c1d8215c48697cf7f81ba45c31435aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSampler.html">negui.genepopfilesampler.GenepopFileSampler</a></td></tr>
<tr class="memitem:abcaee019cd11b009568dde7fa2e94341 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abcaee019cd11b009568dde7fa2e94341"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, o_genepopfilemanager, o_genepopfilesampleparams)</td></tr>
<tr class="separator:abcaee019cd11b009568dde7fa2e94341 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58431ed64951ef4a3cf813c9ee2624b3 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a58431ed64951ef4a3cf813c9ee2624b3"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>filemanager</b> (self)</td></tr>
<tr class="separator:a58431ed64951ef4a3cf813c9ee2624b3 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad48f60ff378a777538a886b058eb0e00 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad48f60ff378a777538a886b058eb0e00"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>sampleparams</b> (self)</td></tr>
<tr class="separator:ad48f60ff378a777538a886b058eb0e00 inherit pub_methods_classnegui_1_1genepopfilesampler_1_1GenepopFileSampler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">This sampler class meant to implement Tiago's sampling code in his
sampleIndivsRelated.py module.  It samples pairs of individuals who
share parentage.  The GenepopFileSampleParams object used by instances
of this class has the values Tiagos module takes at the command line 
that restrict the fraction of indiv (per gen) who should be siblings,
as well as a total individuals per generation.  Note that his
startGen endGen paramters are already implemented via the Sampler's
li_population_numbers parameter.
</pre> 
<p>Definition at line <a class="el" href="genepopfilesampler_8py_source.html#l01480">1480</a> of file <a class="el" href="genepopfilesampler_8py_source.html">genepopfilesampler.py</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2c1d8215c48697cf7f81ba45c31435aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureRelateds.doSample </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sample siblings in pairs/parentage until the percent sibs threshold
is reached, then pad with non-relateds.  See Tiagos code in his 
sampleIndivsRelated.py module.
</pre> 
<p>Definition at line <a class="el" href="genepopfilesampler_8py_source.html#l01545">1545</a> of file <a class="el" href="genepopfilesampler_8py_source.html">genepopfilesampler.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01545"></a><span class="lineno"><a class="line" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds.html#a2c1d8215c48697cf7f81ba45c31435aa"> 1545</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds.html#a2c1d8215c48697cf7f81ba45c31435aa">doSample</a>( self ):</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="stringliteral">        Sample siblings in pairs/parentage until the percent sibs threshold</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="stringliteral">        is reached, then pad with non-relateds.  See Tiagos code in his </span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="stringliteral">        sampleIndivsRelated.py module.</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        FIELD_NAME_AGE=<span class="stringliteral">&quot;age&quot;</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        FIELD_NAME_MOTHER=<span class="stringliteral">&quot;mother&quot;</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        FIELD_NAME_FATHER=<span class="stringliteral">&quot;father&quot;</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        <span class="comment">#estimator driver needs a pop number subsample when it adds calls to the NeEstimator:</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        self.filemanager.subsamplePopulationsByList( self.sampleparams.population_numbers,</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                                                    s_subsample_tag=self.sampleparams.population_subsample_name )</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        dli_indiv_index_lists_by_pop_number={}</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        </div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        i_replicate_count=self.sampleparams.replicates</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        <span class="keywordflow">for</span> i_replicate_number <span class="keywordflow">in</span> range(i_replicate_count ):</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;            <span class="keywordflow">for</span> i_pop_number <span class="keywordflow">in</span> self.sampleparams.population_numbers:</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                ls_id_list=self.filemanager.getListIndividuals( i_pop_number )</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="stringliteral">                We assume that the list of Id&#39;s in the individual list</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="stringliteral">                is indexed such that the zeroth id corresponds to the first</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="stringliteral">                indiv as ordered in the genepop file, the [1] indexed id</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="stringliteral">                is the second indiv, etc.</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="stringliteral">                &#39;&#39;&#39;</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                i_tot_indiv=len( ls_id_list )</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                dli_indiv_index_by_parentage={}</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                li_all_indivs_this_pop=[]</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="stringliteral">                Note that in py3, you can divide 2 ints, at least</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="stringliteral">                when one&#39;s a literal like &quot;100&quot;, and get a float</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="stringliteral">                but in py2 you get the floor of the ratio, i.e. zero</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="stringliteral">                for any ratio &lt; 1/1.  Note that Tiago&#39;s sampleIndivsRelated.py</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="stringliteral">                code has the  &quot;int( arg[2] )/100&quot; formulation, so that</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="stringliteral">                the code is no longer py2 compatible without his import statement:</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="stringliteral">                from __future__ import division.</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="stringliteral">                We try version-neutral syntax:</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="stringliteral">                &#39;&#39;&#39;</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                f_fraction_relateds=old_div(self.sampleparams.percent_relateds, 100.0)</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                <span class="keyword">assert</span> type( f_fraction_relateds ) == float,  \</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                        <span class="stringliteral">&quot;In GenepopFileSamplerIndividualsAgeStructureRelateds Instance, &quot;</span> \</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                                + <span class="stringliteral">&quot;def doSample, non-float result of division.&quot;</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                <span class="keywordflow">for</span> idx <span class="keywordflow">in</span> range( i_tot_indiv ):</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                    s_id=ls_id_list[ idx ]</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                    o_id_vals=GenepopIndivIdVals( s_id, </div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                                        self.sampleparams.fields )</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                    i_age=o_id_vals.getVal( FIELD_NAME_AGE )</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                    <span class="keywordflow">if</span> i_age &gt; 1:</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                        <span class="keywordflow">continue</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                    <span class="comment">#end if too old, continue</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                    i_mother=o_id_vals.getVal( FIELD_NAME_MOTHER )</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                    i_father=o_id_vals.getVal( FIELD_NAME_FATHER )</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                    ti_parentage=( i_mother, i_father )</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                    <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="stringliteral">                    Note that idx+1 gives the number of the individual as ordered by its</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="stringliteral">                    entry in the &quot;pop&quot; section of this pop in the genepop file, as used</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="stringliteral">                    by the genepopfilemanager object to point to it&#39;s byte address in </span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="stringliteral">                    the file.  Thus it&#39;s our way of collecting samples of individuals </span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="stringliteral">                    and passing them into the genepop file manager object&#39;s subsampling </span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="stringliteral">                    records (its attribute __indiv_subsamples).</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="stringliteral">                    &#39;&#39;&#39;</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                    i_indiv_number=idx+1</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                    li_all_indivs_this_pop.append( i_indiv_number )</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                    dli_indiv_index_by_parentage.setdefault( \</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                                ti_parentage, [] ).append( i_indiv_number ) </div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                <span class="comment">#end for each individual&#39;s id   </span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                </div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                i_tot_indivs=len( li_all_indivs_this_pop )</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                i_target_total_indivs=i_tot_indivs</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                <span class="comment">#If too few indivs, error, else reduce the target total if over</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                <span class="comment">#the max, to the max</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                <span class="keywordflow">if</span> i_target_total_indivs &lt; self.sampleparams.min_indiv_per_gen:</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                    s_msg=<span class="stringliteral">&quot;In GenepopFileSamplerIndividualsAgeStructureRelateds, &quot;</span> \</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                            + <span class="stringliteral">&quot;instance, total individuals, &quot;</span> \</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                            + str( i_tot_indivs ) \</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                            + <span class="stringliteral">&quot;is under the value given as minimum, &quot;</span> \</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                            + str( self.sampleparams.min_indiv_per_gen ) \</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                            + <span class="stringliteral">&quot;.&quot;</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                    <span class="keywordflow">raise</span> Exception( s_msg )</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                <span class="keywordflow">elif</span> i_target_total_indivs &gt; self.sampleparams.max_indiv_per_gen:</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                    i_target_total_indivs=self.sampleparams.max_indiv_per_gen</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                <span class="comment">#end if total individuals under min, error</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                i_target_total_relateds=i_target_total_indivs * f_fraction_relateds</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                li_relateds_collected=self.<a class="code" href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds.html#af76a2ae0e6f84e4fe8bc8e5856e3a16b">__get_siblings</a>( dli_indiv_index_by_parentage, </div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                                                                    i_target_total_relateds )</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;            </div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                <span class="keywordflow">for</span> i_related <span class="keywordflow">in</span> li_relateds_collected:</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                    li_all_indivs_this_pop.remove( i_related )</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;                <span class="comment">#end for each related collected</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                <span class="comment">#rename for clarity</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                li_individuals_with_relateds_removed=\</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                                    li_all_indivs_this_pop</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;                i_total_relateds_collected=len( li_relateds_collected )</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                i_non_relateds_needed_to_make_total= i_target_total_indivs \</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                                                    - i_total_relateds_collected</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                li_non_relateds_collected = []</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                <span class="keywordflow">if</span> i_non_relateds_needed_to_make_total &gt; 0:</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                    <span class="keywordflow">try</span>:</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                        li_non_relateds_collected=random.sample( \</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                                            li_individuals_with_relateds_removed, </div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                                                i_non_relateds_needed_to_make_total )</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                    <span class="keywordflow">except</span> Exception <span class="keyword">as</span> oex:</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                        <span class="comment">#We may be changing the algorithm to test</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                        <span class="comment">#for the sample size vs the length of the list sampled</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                        <span class="comment">#but for now we catch errors:</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                        s_sample_error_msg= \</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                                <span class="stringliteral">&quot;In GenepopFileSamplerIndividualsAgeStructureRelateds &quot;</span> \</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                                + <span class="stringliteral">&quot;instance, def doSample, &quot;</span>  \</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                                + <span class="stringliteral">&quot;random.sample failed on list of &quot;</span> \</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                                + str( len( li_individuals_with_relateds_removed ) ) \</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                                + <span class="stringliteral">&quot; individuals.  Target total to be sampled: &quot;</span> \</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                                + str( i_non_relateds_needed_to_make_total ) + <span class="stringliteral">&quot;.&quot;</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                        s_msg=s_sample_error_msg + <span class="stringliteral">&quot;  Exception: &quot;</span> + str( oex ) + <span class="stringliteral">&quot;.&quot;</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                        <span class="keywordflow">raise</span> Exception( s_msg )</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                    <span class="comment">#try . . . except . . . </span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                <span class="keywordflow">elif</span> i_non_relateds_needed_to_make_total &lt; 0:</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                    <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="stringliteral">                    Not sure this case is possible, but suspect it may be</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;<span class="stringliteral">                    due either to rounding, or the pairwise collecting of</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="stringliteral">                    siblings.  We may after trials, decide to except an overage</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="stringliteral">                    of one, but for now let&#39;s throw an error:</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="stringliteral">                    &#39;&#39;&#39;</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                    s_msg=<span class="stringliteral">&quot;In GenepopFileSamplerIndividualsAgeStructureRelateds &quot;</span> \</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                                + <span class="stringliteral">&quot;instance, def doSample, &quot;</span>  \</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                                + <span class="stringliteral">&quot;relateds collected, &quot;</span> \</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                                + str( i_total_relateds_collected ) \</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                                + <span class="stringliteral">&quot;, exceeds the maximum set as valid, &quot;</span> \</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                                + str( self.sampleparams.max_indiv_per_gen ) \</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                                + <span class="stringliteral">&quot;.&quot;</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                    <span class="keywordflow">raise</span> Exception</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                <span class="comment">#end if need to collect at least one non_relateds</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                li_indiv_sample=li_relateds_collected + li_non_relateds_collected</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                dli_indiv_index_lists_by_pop_number[ i_pop_number ] = li_indiv_sample</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            <span class="comment">#end for each pop number</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            s_this_subsample_name=make_subsample_tag( \</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                                self.sampleparams.sample_param_value, </div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                                i_replicate_number, </div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                                SCHEME_RELATEDS,</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;                                s_prefix=self.sampleparams.sample_tag_base )</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            self.filemanager.subsampleIndividualsByNumberList( \</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                                    dli_indiv_index_lists_by_pop_number, </div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                                                    s_this_subsample_name )</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="comment">#end for each replicate</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="keywordflow">return</span></div><div class="ttc" id="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds_html_af76a2ae0e6f84e4fe8bc8e5856e3a16b"><div class="ttname"><a href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds.html#af76a2ae0e6f84e4fe8bc8e5856e3a16b">negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureRelateds.__get_siblings</a></div><div class="ttdeci">def __get_siblings(self, dli_indiv_index_by_parentage, i_target_total_relateds)</div><div class="ttdef"><b>Definition:</b> <a href="genepopfilesampler_8py_source.html#l01498">genepopfilesampler.py:1498</a></div></div>
<div class="ttc" id="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds_html_a2c1d8215c48697cf7f81ba45c31435aa"><div class="ttname"><a href="classnegui_1_1genepopfilesampler_1_1GenepopFileSamplerIndividualsAgeStructureRelateds.html#a2c1d8215c48697cf7f81ba45c31435aa">negui.genepopfilesampler.GenepopFileSamplerIndividualsAgeStructureRelateds.doSample</a></div><div class="ttdeci">def doSample(self)</div><div class="ttdef"><b>Definition:</b> <a href="genepopfilesampler_8py_source.html#l01545">genepopfilesampler.py:1545</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="genepopfilesampler_8py_source.html">genepopfilesampler.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
